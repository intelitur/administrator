<div class="container">
  <h1 style="width: 100%" class="text-center font-weight-light mt-3">
    Gestionar Imágenes
  </h1>

  <div class="container">
    <div
      *ngIf="this.imageService.images.length != 0"
      style="
        display: flex;
        flex-direction: column;
        border-radius: 20px;
        border: solid 1.5px rgb(220, 220, 220);
        margin: auto;
        min-width: 280px;
      "
    >
      <ngb-carousel class="container-fluid" (slide)="onSlide($event)">
        <ng-template
          *ngFor="let i of this.imageService.images; let index = index"
          [id]="'slideId_' + index"
          ngbSlide
        >
          <img
            class="d-block w-100"
            style="max-height: 450px !important; border-radius: 10px"
            src="{{ url }}{{ this.imageService.images[index].name }}"
          />
        </ng-template>
      </ngb-carousel>
      <div style="display: flex; height: 70px">
        <div
          title="Añadir imágenes"
          style="
            width: 50%;
            border-top: solid 1.5px rgb(220, 220, 220);
            border-right: solid 0.75px rgb(220, 220, 220);
          "
        >
          <label
            for="file-upload"
            class="image-buttons"
            style="
              border-radius: 0 0 0 20px;
              color: #dbb735;
              text-align: center;
              padding-top: 5%;
            "
            ><mat-icon>find_replace</mat-icon></label
          >
          <input
            [disabled]="!loading"
            id="file-upload"
            (change)="uploadFile($event.target.files)"
            type="file"
            accept="image/x-png,image/gif,image/jpeg"
            style="display: none"
            multiple
          />
        </div>
        <div
          title="Eliminar imagen"
          style="
            width: 50%;
            border-top: solid 1.5px rgb(220, 220, 220);
            border-left: solid 0.75px rgb(220, 220, 220);
          "
        >
          <button
            [disabled]="!loading"
            mat-button
            style="border-radius: 0 0 20px 0"
            (click)="deleteImage()"
            class="image-buttons"
            color="warn"
          >
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </div>
    </div>
    <div
    *ngIf="this.imageService.images.length == 0"
      style="
        width: 50%;
        height: 300px;
        display: flex;
        justify-content: center;
        align-items: center;
      "
    >
      <div
        title="Añadir imágenes"
        class="noImageButton"
      >
        <label
          for="file-upload"
          style="
            width: 100%;
            margin: 0%;
            cursor: pointer;
            color: #dbb735;
            text-align: center;
            padding-top: 2%;
          "
        >
          <mat-icon
            style="font-size: 40px; width: 40px; height: 40px; padding-top: 3%"
            >add_photo_alternate</mat-icon
          >
        </label>
        <input
          [disabled]="!loading"
          id="file-upload"
          (change)="uploadFile($event.target.files)"
          type="file"
          accept="image/x-png,image/gif,image/jpeg"
          style="display: none"
          multiple
        />
      </div>
    </div>
  </div>
</div>

<ng-template #loading>
  <mat-progress-bar mode="indeterminate"></mat-progress-bar>
</ng-template>
